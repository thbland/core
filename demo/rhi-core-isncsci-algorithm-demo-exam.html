<!--
@license
Copyright (c) 2015 Rick Hansen Institute. All rights reserved.
This code may only be used under the modified Apache license found at https://raw.githubusercontent.com/EddieMachete/rhi-core-isncsci-algorithm/master/LICENSE
Author: RhiTech <tech@rickhanseninstitute.org>
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html"/>
<link rel="import" href="../../../bower_components/paper-styles/paper-styles.html"/>
<link rel="import" href="../rhi-core-isncsci-exam.html" />
<dom-module id="rhi-core-isncsci-algorithm-demo-exam">
    <template>
        <style>
            /* local styles go here */
            :host {
                display: block;
                @apply(--paper-font-body1);
            }
            
            .font-title {
                @apply(--paper-font-title);
            }
            
            table.raw-values {
                margin-right: 24px;
                max-width: 440px;
            }
            
            table.raw-values th {
                color: #666;
                font-weight: normal;
                padding: 0 8px;
            }
            
            table.raw-values td {
                text-align: center;
            }
        
            .color-dark-medium {
                color: #666;
            }
            
            .display-flex {
                display: flex;
            }
            
            .comments {
                margin: 24px 0;
                max-width: 540px;
            }
            
            .comments .label {
                margin-right: 16px;
            }
            
            .totals .value {
                margin-top: 16px;
            }
            
            .totals .label {
                color: #666;
                margin-right: 8px;
                width: 110px;
            }
        </style>
        <!-- shadow DOM for your element -->
        <div class="comments display-flex">
            <div class="label">Comments:</div>
            <div class="color-dark-medium">[[comments]]</div>
        </div>
        <div class="display-flex">
            <div>
                <table class="raw-values">
                  <thead>
                    <tr>
                      <th colspan="4">Right</th>
                      <th colspan="4">Left</th>
                    </tr>
                    <tr>
                      <th>&nbsp;</th>
                      <th>Motor</th>
                      <th>Light Touch</th>
                      <th>Pin Prick</th>
                      <th>Light Touch</th>
                      <th>Pin Prick</th>
                      <th>Motor</th>
                      <th>&nbsp;</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                        <th>[[c2.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[c2.rightTouch]]</td>
                        <td>[[c2.rightPrick]]</td>
                        <td>[[c2.leftTouch]]</td>
                        <td>[[c2.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[c2.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c3.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[c3.rightTouch]]</td>
                        <td>[[c3.rightPrick]]</td>
                        <td>[[c3.leftTouch]]</td>
                        <td>[[c3.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[c3.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c4.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[c4.rightTouch]]</td>
                        <td>[[c4.rightPrick]]</td>
                        <td>[[c4.leftTouch]]</td>
                        <td>[[c4.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[c4.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c5.name]]</th>
                        <td>[[c5.rightMotor]]</td>
                        <td>[[c5.rightTouch]]</td>
                        <td>[[c5.rightPrick]]</td>
                        <td>[[c5.leftTouch]]</td>
                        <td>[[c5.leftPrick]]</td>
                        <td>[[c5.leftMotor]]</td>
                        <th>[[c5.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c6.name]]</th>
                        <td>[[c6.rightMotor]]</td>
                        <td>[[c6.rightTouch]]</td>
                        <td>[[c6.rightPrick]]</td>
                        <td>[[c6.leftTouch]]</td>
                        <td>[[c6.leftPrick]]</td>
                        <td>[[c6.leftMotor]]</td>
                        <th>[[c6.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c7.name]]</th>
                        <td>[[c7.rightMotor]]</td>
                        <td>[[c7.rightTouch]]</td>
                        <td>[[c7.rightPrick]]</td>
                        <td>[[c7.leftTouch]]</td>
                        <td>[[c7.leftPrick]]</td>
                        <td>[[c7.leftMotor]]</td>
                        <th>[[c7.name]]</th>
                    </tr>
                    <tr>
                        <th>[[c8.name]]</th>
                        <td>[[c8.rightMotor]]</td>
                        <td>[[c8.rightTouch]]</td>
                        <td>[[c8.rightPrick]]</td>
                        <td>[[c8.leftTouch]]</td>
                        <td>[[c8.leftPrick]]</td>
                        <td>[[c8.leftMotor]]</td>
                        <th>[[c8.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t1.name]]</th>
                        <td>[[t1.rightMotor]]</td>
                        <td>[[t1.rightTouch]]</td>
                        <td>[[t1.rightPrick]]</td>
                        <td>[[t1.leftTouch]]</td>
                        <td>[[t1.leftPrick]]</td>
                        <td>[[t1.leftMotor]]</td>
                        <th>[[t1.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t2.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t2.rightTouch]]</td>
                        <td>[[t2.rightPrick]]</td>
                        <td>[[t2.leftTouch]]</td>
                        <td>[[t2.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t2.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t3.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t3.rightTouch]]</td>
                        <td>[[t3.rightPrick]]</td>
                        <td>[[t3.leftTouch]]</td>
                        <td>[[t3.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t3.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t4.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t4.rightTouch]]</td>
                        <td>[[t4.rightPrick]]</td>
                        <td>[[t4.leftTouch]]</td>
                        <td>[[t4.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t4.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t5.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t5.rightTouch]]</td>
                        <td>[[t5.rightPrick]]</td>
                        <td>[[t5.leftTouch]]</td>
                        <td>[[t5.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t5.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t6.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t6.rightTouch]]</td>
                        <td>[[t6.rightPrick]]</td>
                        <td>[[t6.leftTouch]]</td>
                        <td>[[t6.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t6.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t7.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t7.rightTouch]]</td>
                        <td>[[t7.rightPrick]]</td>
                        <td>[[t7.leftTouch]]</td>
                        <td>[[t7.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t7.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t8.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t8.rightTouch]]</td>
                        <td>[[t8.rightPrick]]</td>
                        <td>[[t8.leftTouch]]</td>
                        <td>[[t8.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t8.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t9.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t9.rightTouch]]</td>
                        <td>[[t9.rightPrick]]</td>
                        <td>[[t9.leftTouch]]</td>
                        <td>[[t9.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t9.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t10.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t10.rightTouch]]</td>
                        <td>[[t10.rightPrick]]</td>
                        <td>[[t10.leftTouch]]</td>
                        <td>[[t10.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t10.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t11.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t11.rightTouch]]</td>
                        <td>[[t11.rightPrick]]</td>
                        <td>[[t11.leftTouch]]</td>
                        <td>[[t11.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t11.name]]</th>
                    </tr>
                    <tr>
                        <th>[[t12.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[t12.rightTouch]]</td>
                        <td>[[t12.rightPrick]]</td>
                        <td>[[t12.leftTouch]]</td>
                        <td>[[t12.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[t12.name]]</th>
                    </tr>
                    <tr>
                        <th>[[l1.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[l1.rightTouch]]</td>
                        <td>[[l1.rightPrick]]</td>
                        <td>[[l1.leftTouch]]</td>
                        <td>[[l1.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[l1.name]]</th>
                    </tr>
                    <tr>
                        <th>[[l2.name]]</th>
                        <td>[[l2.rightMotor]]</td>
                        <td>[[l2.rightTouch]]</td>
                        <td>[[l2.rightPrick]]</td>
                        <td>[[l2.leftTouch]]</td>
                        <td>[[l2.leftPrick]]</td>
                        <td>[[l2.leftMotor]]</td>
                        <th>[[l2.name]]</th>
                    </tr>
                    <tr>
                        <th>[[l3.name]]</th>
                        <td>[[l3.rightMotor]]</td>
                        <td>[[l3.rightTouch]]</td>
                        <td>[[l3.rightPrick]]</td>
                        <td>[[l3.leftTouch]]</td>
                        <td>[[l3.leftPrick]]</td>
                        <td>[[l3.leftMotor]]</td>
                        <th>[[l3.name]]</th>
                    </tr>
                    <tr>
                        <th>[[l4.name]]</th>
                        <td>[[l4.rightMotor]]</td>
                        <td>[[l4.rightTouch]]</td>
                        <td>[[l4.rightPrick]]</td>
                        <td>[[l4.leftTouch]]</td>
                        <td>[[l4.leftPrick]]</td>
                        <td>[[l4.leftMotor]]</td>
                        <th>[[l4.name]]</th>
                    </tr>
                    <tr>
                        <th>[[l5.name]]</th>
                        <td>[[l5.rightMotor]]</td>
                        <td>[[l5.rightTouch]]</td>
                        <td>[[l5.rightPrick]]</td>
                        <td>[[l5.leftTouch]]</td>
                        <td>[[l5.leftPrick]]</td>
                        <td>[[l5.leftMotor]]</td>
                        <th>[[l5.name]]</th>
                    </tr>
                    <tr>
                        <th>[[s1.name]]</th>
                        <td>[[s1.rightMotor]]</td>
                        <td>[[s1.rightTouch]]</td>
                        <td>[[s1.rightPrick]]</td>
                        <td>[[s1.leftTouch]]</td>
                        <td>[[s1.leftPrick]]</td>
                        <td>[[s1.leftMotor]]</td>
                        <th>[[s1.name]]</th>
                    </tr>
                    <tr>
                        <th>[[s2.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[s2.rightTouch]]</td>
                        <td>[[s2.rightPrick]]</td>
                        <td>[[s2.leftTouch]]</td>
                        <td>[[s2.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[s2.name]]</th>
                    </tr>
                    <tr>
                        <th>[[s3.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[s3.rightTouch]]</td>
                        <td>[[s3.rightPrick]]</td>
                        <td>[[s3.leftTouch]]</td>
                        <td>[[s3.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[s3.name]]</th>
                    </tr>
                    <tr>
                        <th>[[s4_5.name]]</th>
                        <td>&nbsp;</td>
                        <td>[[s4_5.rightTouch]]</td>
                        <td>[[s4_5.rightPrick]]</td>
                        <td>[[s4_5.leftTouch]]</td>
                        <td>[[s4_5.leftPrick]]</td>
                        <td>&nbsp;</td>
                        <th>[[s4_5.name]]</th>
                    </tr>
                  </tbody>
                </table>
            </div>
            <div class="totals">
                <div class="font-title">Totals:</div>
                <div class="value display-flex">
                    <div class="label">Right Sensory:</div>
                    <div>[[rightSensory]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Left Sensory:</div>
                    <div>[[leftSensory]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Right Motor:</div>
                    <div>[[rightMotor]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Left Motor:</div>
                    <div>[[leftMotor]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">NLI:</div>
                    <div>[[nli]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">AIS:</div>
                    <div>[[ais]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Right Sensory ZPP:</div>
                    <div>[[rightSensoryZpp]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Left Sensory ZPP:</div>
                    <div>[[leftSensoryZpp]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Right Motor ZPP:</div>
                    <div>[[rightMotorZpp]]</div>
                </div>
                <div class="value display-flex">
                    <div class="label">Left Motor ZPP:</div>
                    <div>[[leftMotorZpp]]</div>
                </div>
            </div>
        </div>
    </template>
    <script>
        /* global Polymer customElements */
        'use strict';
        
        class RhiCoreIsncsciAlgorithmDemoExam extends Polymer.Element {
            static get is() { return 'rhi-core-isncsci-algorithm-demo-exam'; }
            
            // Properties for the element's public API
            static get properties() {
                return {
                    comments: {
                        type: String,
                        value: ''
                    },
                    c2: {
                        type: Object
                    },
                    c3: {
                        type: Object
                    },
                    c4: {
                        type: Object
                    },
                    c5: {
                        type: Object
                    },
                    c6: {
                        type: Object
                    },
                    c7: {
                        type: Object
                    },
                    c8: {
                        type: Object
                    },
                    t1: {
                        type: Object
                    },
                    t2: {
                        type: Object
                    },
                    t3: {
                        type: Object
                    },
                    t4: {
                        type: Object
                    },
                    t5: {
                        type: Object
                    },
                    t6: {
                        type: Object
                    },
                    t7: {
                        type: Object
                    },
                    t8: {
                        type: Object
                    },
                    t9: {
                        type: Object
                    },
                    t10: {
                        type: Object
                    },
                    t11: {
                        type: Object
                    },
                    t12: {
                        type: Object
                    },
                    l1: {
                        type: Object
                    },
                    l2: {
                        type: Object
                    },
                    l3: {
                        type: Object
                    },
                    l4: {
                        type: Object
                    },
                    l5: {
                        type: Object
                    },
                    s1: {
                        type: Object
                    },
                    s2: {
                        type: Object
                    },
                    s3: {
                        type: Object
                    },
                    s4_5: {
                        type: Object
                    },
                    leftSensory: {
                        type: String,
                        value: ''
                    },
                    rightSensory: {
                        type: String,
                        value: ''
                    },
                    leftMotor: {
                        type: String,
                        value: ''
                    },
                    rightMotor: {
                        type: String,
                        value: ''
                    },
                    nli: {
                        type: String,
                        value: ''
                    },
                    ais: {
                        type: String,
                        value: ''
                    },
                    leftSensoryZpp: {
                        type: String,
                        value: ''
                    },
                    rightSensoryZpp: {
                        type: String,
                        value: ''
                    },
                    leftMotorZpp: {
                        type: String,
                        value: ''
                    },
                    rightMotorZpp: {
                        type: String,
                        value: ''
                    }
                };
            }

            ready() {
                super.ready();
                this.isncsciExam = new IsncsciExam();
                this.c2 = this.isncsciExam.getLevelWithName('C2');
            }
            
            setExam(isncsciExam, comments) {
                this.comments = comments;
                this.c2 = isncsciExam.getLevelWithName('C2');
                this.c3 = isncsciExam.getLevelWithName('C3');
                this.c4 = isncsciExam.getLevelWithName('C4');
                this.c5 = isncsciExam.getLevelWithName('C5');
                this.c6 = isncsciExam.getLevelWithName('C6');
                this.c7 = isncsciExam.getLevelWithName('C7');
                this.c8 = isncsciExam.getLevelWithName('C8');
                this.t1 = isncsciExam.getLevelWithName('T1');
                this.t2 = isncsciExam.getLevelWithName('T2');
                this.t3 = isncsciExam.getLevelWithName('T3');
                this.t4 = isncsciExam.getLevelWithName('T4');
                this.t5 = isncsciExam.getLevelWithName('T5');
                this.t6 = isncsciExam.getLevelWithName('T6');
                this.t7 = isncsciExam.getLevelWithName('T7');
                this.t8 = isncsciExam.getLevelWithName('T8');
                this.t9 = isncsciExam.getLevelWithName('T9');
                this.t10 = isncsciExam.getLevelWithName('T10');
                this.t11 = isncsciExam.getLevelWithName('T11');
                this.t12 = isncsciExam.getLevelWithName('T12');
                this.l1 = isncsciExam.getLevelWithName('L1');
                this.l2 = isncsciExam.getLevelWithName('L2');
                this.l3 = isncsciExam.getLevelWithName('L3');
                this.l4 = isncsciExam.getLevelWithName('L4');
                this.l5 = isncsciExam.getLevelWithName('L5');
                this.s1 = isncsciExam.getLevelWithName('S1');
                this.s2 = isncsciExam.getLevelWithName('S2');
                this.s3 = isncsciExam.getLevelWithName('S3');
                this.s4_5 = isncsciExam.getLevelWithName('S4_5');
            }

            setTotals(totals) {
                this.rightSensory = totals.getRightSensoryLongValueString().replace(/,/g, ', ');
                this.leftSensory = totals.getRightSensoryLongValueString().replace(/,/g, ', ');
                this.rightMotor = totals.getRightMotorLongValueString().replace(/,/g, ', ');
                this.leftMotor = totals.getLeftMotorLongValueString().replace(/,/g, ', ');
                this.nli = totals.getNeurologicalLevelsOfInjuryLongValueString().replace(/,/g, ', ');
                this.ais = totals.getAsiaImpairmentScaleValues().replace(/,/g, ', ');

                let isComplete = this.ais.indexOf('A') !== -1;

                this.rightSensoryZpp = isComplete ? totals.getRightSensoryZppLongValueString().replace(/,/g, ', ') : '';
                this.leftSensoryZpp = isComplete ? totals.getLeftSensoryZppLongValueString().replace(/,/g, ', ') : '';
                this.rightMotorZpp = isComplete ? totals.getRightMotorZppLongValueString().replace(/,/g, ', ') : '';
                this.leftMotorZpp = isComplete ? totals.getLeftMotorZppLongValueString().replace(/,/g, ', ') : '';
            }
        }
        
        customElements.define(RhiCoreIsncsciAlgorithmDemoExam.is, RhiCoreIsncsciAlgorithmDemoExam);
    </script>
</dom-module>